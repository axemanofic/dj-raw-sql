{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Get Started","text":"<p>dj-raw-sql is just a wrapper over the standard Django query</p> <p>This demo shows how to get the record(s) from the database</p> <p>Example:</p> queries.py<pre><code>def get_music_by_id(id: int):\n    return \"SELECT * FROM dj_app_music WHERE id = %s\", (id,)\n</code></pre> models.py<pre><code>from django.db import models\n\n# Our demo model\nclass Music(models.Model):\n    name = models.CharField(max_length=150)\n    create_at = models.DateTimeField(auto_now_add=True)\n    update_at = models.DateTimeField(auto_now=True)\n    is_delete = models.BooleanField(default=False)\n</code></pre> views.py<pre><code>from django.http import JsonResponse\nfrom django.views import View\n\nfrom my_app.queries import get_music_by_id\n\nfrom dj_raw_sql import QueryExecutor\n\n\nclass MyView(View):\n    def get(self, request, *args, **kwargs):\n        music: tuple[tuple] = QueryExecutor.fetchone(get_music_by_id, id=1)\n        return JsonResponse({\"name\": music[0][1]})\n</code></pre>"},{"location":"executors/ordereddict_query_executor/","title":"OrderedDictQueryExecutor","text":"<p>This class inherits from QueryExecutor and modifies methods for outputting data.</p> <p>Changed Methods:</p> <ol> <li>fetchall - returns list[OrderedDict], i.e. suitable for queries like 'SELECT * FROM table'</li> <li>fetchone - returns one entry as a OrderedDict</li> </ol> <p>Example:</p> queries.py<pre><code>def get_all_music():\n    return \"SELECT * FROM dj_app_music\"\n\ndef get_music_by_id(id: int):\n    return \"SELECT * FROM dj_app_music\", (id,)\n</code></pre> models.py<pre><code>from django.db import models\n\n# Our demo model\nclass Music(models.Model):\n    name = models.CharField(max_length=150)\n    create_at = models.DateTimeField(auto_now_add=True)\n    update_at = models.DateTimeField(auto_now=True)\n    is_delete = models.BooleanField(default=False)\n</code></pre> views.py<pre><code>from django.http import JsonResponse\nfrom django.views import View\n\nfrom my_app.queries import get_music_by_id\n\nfrom dj_raw_sql import OrderedDictQueryExecutor\n\n\nclass AllMusicView(View):\n    def get(self, request, *args, **kwargs):\n        musics: tuple[tuple] = OrderedDictQueryExecutor.fetchall(get_all_music)\n        result = []\n\n        for music in musics:\n            result.append({\"id\": music[\"id\"], \"name\": music[\"name\"]})\n\n        return JsonResponse({\"result\":result})\n\n\nclass MusicView(View):\n    def get(self, request, *args, **kwargs):\n\n        music: tuple[tuple] = OrderedDictQueryExecutor.fetchone(get_music_by_id, id=1)\n\n        return JsonResponse({\"result\": music[\"name\"]})\n</code></pre>"},{"location":"executors/query_executor/","title":"QueryExecutor","text":"<p>This class executes basic DB-API queries.</p> <p>The class has 3 methods:</p> <ol> <li>fetchall - returns list[tuple], i.e. suitable for queries like 'SELECT * FROM table'</li> <li>fetchone - returns one entry as a tuple</li> <li>execute - executes a query and returns no result suitable for INSERT, UPDATE, DELETE</li> </ol> <p>Example:</p> queries.py<pre><code>def get_all_music():\n    return \"SELECT * FROM dj_app_music\"\n\ndef get_music_by_id(id: int):\n    return \"SELECT * FROM dj_app_music\", (id,)\n</code></pre> models.py<pre><code>from django.db import models\n\n# Our demo model\nclass Music(models.Model):\n    name = models.CharField(max_length=150)\n    create_at = models.DateTimeField(auto_now_add=True)\n    update_at = models.DateTimeField(auto_now=True)\n    is_delete = models.BooleanField(default=False)\n</code></pre> views.py<pre><code>from django.http import JsonResponse\nfrom django.views import View\n\nfrom my_app.queries import get_music_by_id\n\nfrom dj_raw_sql import QueryExecutor\n\n\nclass AllMusicView(View):\n    def get(self, request, *args, **kwargs):\n        musics: tuple[tuple] = QueryExecutor.fetchall(get_all_music)\n        result = []\n\n        for music in musics:\n            result.append({\"id\": music[0], \"name\": music[1]})\n\n        return JsonResponse({\"result\":result})\n\n\nclass MusicView(View):\n    def get(self, request, *args, **kwargs):\n        music: tuple = QueryExecutor.fetchone(get_music_by_id, id=1)\n        return JsonResponse({\"result\": music[1]})\n</code></pre>"}]}